<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Go to homepage" />
  <title>CSCI 13300 SP 2025</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">CSCI 13300 SP 2025</h1>
<p class="author"><a href="https://benrosenberg.info/teaching/sp25/csci13300.html">Go to homepage</a></p>
<p class="date">Last updated: 2025-04-05</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#unit-10-assessment">Unit 10 Assessment</a>
<ul>
<li><a href="#due-date-and-submission">Due date and submission</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#data">Data</a></li>
<li><a href="#helper-functions">Helper functions</a></li>
<li><a href="#tasks">Tasks</a></li>
</ul></li>
<li><a href="#notes">Notes</a></li>
</ul>
</nav>
<h1 id="unit-10-assessment">Unit 10 Assessment</h1>
<h2 id="due-date-and-submission">Due date and submission</h2>
<p>This assignment is due <strong>April 26th</strong> at 11:59 PM. Submit your solution on Brightspace, under the “Unit 11” assignment.</p>
<p><strong>Please copy your code into the text box, making sure to indent it properly with whitespace so that it appears the same as in IDLE or VSCode or wherever you wrote the code. This will make it easier for me to grade.</strong></p>
<p>You can submit multiple times. I will only grade your last submission.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>In order to do this assignment you will need pandas and matplotlib installed. We went through how to do that in class. If you look it up online, you should be able to figure it out.</p>
<h2 id="data">Data</h2>
<p>You will use these datasets in your assignment:</p>
<ul>
<li><a href="coordinates_4.txt">Coordinates 4</a></li>
<li><a href="KKR_5Y.csv">KKR stock prices, last 5 years</a></li>
</ul>
<h2 id="helper-functions">Helper functions</h2>
<p>Here are some helper functions for plotting. The function <code>plot_regression</code> is tailored to dealing with the data for KKR (and other) stocks, while <code>plot_coords</code> will work for the general “Coordinates” file given above.</p>
<p>When predicting values based on the regression, you may want to print out the coefficients generated by <code>np.polyfit</code> within the <code>plot_regression</code> function, and plug them into <a href="https://www.desmos.com/calculator">Desmos</a> to see how the function behaves. You will need to figure out how the conversion is being done between the numeric index and the date in order to understand how the function given by the regression coordinates relates to date, so that you can evaluate the function in the year 2027.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_coords(filename):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(filename, header<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    plt.plot(df[<span class="dv">0</span>],df[<span class="dv">1</span>],<span class="st">&#39;.&#39;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_regression(filename, col_x, col_y, degree, num_days<span class="op">=</span><span class="va">None</span>, stripchar<span class="op">=</span><span class="st">&#39;$&#39;</span>):</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(filename)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    df[col_y] <span class="op">=</span> df[col_y].<span class="bu">str</span>.lstrip(stripchar).astype(<span class="bu">float</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    df[col_x] <span class="op">=</span> pd.to_datetime(df[col_x], <span class="bu">format</span><span class="op">=</span><span class="st">&#39;%m/</span><span class="sc">%d</span><span class="st">/%Y&#39;</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort from earliest to latest</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.sort_values(by<span class="op">=</span>col_x)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter to the most recent num_days, if specified</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> num_days <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        latest_date <span class="op">=</span> df[col_x].<span class="bu">max</span>()</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        earliest_date <span class="op">=</span> latest_date <span class="op">-</span> pd.Timedelta(days<span class="op">=</span>num_days)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df[df[col_x] <span class="op">&gt;=</span> earliest_date]</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    df.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fit polynomial to the index (which is now chronological)</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="op">=</span> np.polyfit(df.index, df[col_y], deg<span class="op">=</span>degree)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate line for plotting</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    line_x <span class="op">=</span> df.index[::<span class="bu">max</span>(<span class="dv">1</span>, <span class="bu">len</span>(df)<span class="op">//</span><span class="dv">100</span>)]</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    line_y <span class="op">=</span> np.polyval(coeffs, line_x)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    plt.plot(df.index, df[col_y], label<span class="op">=</span><span class="st">&quot;Data&quot;</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    plt.plot(line_x, line_y, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, label<span class="op">=</span><span class="ss">f&quot;Poly (deg </span><span class="sc">{</span>degree<span class="sc">}</span><span class="ss">)&quot;</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    plt.xticks(df.index[::<span class="bu">max</span>(<span class="dv">1</span>, <span class="bu">len</span>(df)<span class="op">//</span><span class="dv">10</span>)], df[col_x].dt.date[::<span class="bu">max</span>(<span class="dv">1</span>, <span class="bu">len</span>(df)<span class="op">//</span><span class="dv">10</span>)], rotation<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f&quot;Polynomial Regression (Last </span><span class="sc">{</span>num_days<span class="sc">}</span><span class="ss"> Days)&quot;</span> <span class="cf">if</span> num_days <span class="cf">else</span> <span class="st">&quot;Polynomial Regression&quot;</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(col_x)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(col_y)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div>
<h2 id="tasks">Tasks</h2>
<p>When answering non-code questions, write the answer as a comment in the file next to the relevant pieces of code you wrote to get your answer. You should have one comment for each of the below tasks.</p>
<p><strong><em>Note</em></strong>: For the stock prediction questions: If you are having trouble predicting the exact values for the year 2027 using the regression coefficients, you can just try extending the graph manually and guessing what the values will be.</p>
<ol type="1">
<li>Plot the coordinates in the <a href="coordinates_4.txt">Coordinates 4</a> file. What do you see?
<ul>
<li>You can use the <code>plot_coords</code> function for this.</li>
</ul></li>
<li>Plot the trajectory of the KKR stock over the last 5 years (the entire dataset). Do a linear regression (<code>deg=1</code>) using <code>np.polyfit</code> like we saw in class, and use the resulting parameters to predict what the price of KKR stock will be in 2027.
<ul>
<li>You can use the <code>plot_regression</code> function for this. Add a print statement after the <code>coeffs</code> are calculated to print them out, and use the equation of a line <span class="math inline">y=m_1 x + m_0</span> to predict the KKR stock value in 2027.</li>
<li>When calling <code>plot_regression</code>, you will want to use the string <code>Date</code> for <code>col_x</code> and <code>Low</code> for <code>col_y</code>. The filename is the name of the KKR stock CSV file on your computer (make sure it’s in the same folder as your code). The degree is used as the <code>deg</code> parameter to <code>np.polyfit</code>.</li>
</ul></li>
<li>Now, do a quadratic regression (with <code>np.polyfit</code> and <code>deg=2</code>) on the KKR stock data for the last 240 days. You should get 3 numbers as a result, which correspond to the coordinates <span class="math inline">m_2</span>, <span class="math inline">m_1</span>, and <span class="math inline">m_0</span> respectively of the polynomial <span class="math inline">y = m_2x^2 + m_1x + m_0</span>. Based on this regression, what do you expect the price of KKR stock to be in 2027?
<ul>
<li>You can use the <code>plot_regression</code> function for this too. Use <code>num_days=240</code> for this part.</li>
</ul></li>
</ol>
<p>Follow-up question (<em>not graded</em>, for fun): If someone was given $15,000 in KKR RSUs (restricted stock units) on February 14th of 2024, how much money (in unrealized gains) has that person lost by April 4th, 2025, when compared to the peak attained over the ownership timeframe? (The answer should be a little over $10,000.)</p>
<h1 id="notes">Notes</h1>
<p>You should be able to do all of the tasks with only the Python topics we covered in class so far.</p>
<p>If you want to use more complex functionality than what we discussed in class, the Python documentation may be helpful: <a href="https://docs.python.org/3.10/">Python 3.10 documentation</a></p>
<p>Additionally, the pandas and matplotlib documentation may be helpful: <a href="https://pandas.pydata.org/docs/">pandas documentation</a>, <a href="https://matplotlib.org/stable/index.html">matplotlib documentation</a></p>
</body>
</html>
